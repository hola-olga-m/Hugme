import{r as o,H as F,I as w,J as L}from"./main-0012ce0c.js";const p=(f={})=>{const{shouldRefetchOnMount:O=!0,shouldRefetchOnFocus:i=!1}=f,[h,u]=o.useState(!1),[S,a]=o.useState(null),[t,g]=o.useState(null),[E,M]=o.useState(null),n=o.useCallback(()=>{const e=localStorage.getItem("authToken");return F({baseUrl:`${w}${L}`,token:e,onError:(c,l)=>{console.error(`[Mesh SDK] Error in ${c}:`,l),a(l)}})},[])();!n.getFriendsMoods&&n.FriendsMoods&&(n.getFriendsMoods=n.FriendsMoods);const k=o.useCallback(async(e,c,...l)=>{u(!0),a(null),g(e);try{const r=await c(...l);return M(r),u(!1),r}catch(r){throw console.error(`[Mesh SDK] Error executing ${e}:`,r),a(r),u(!1),r}},[]),s={};Object.keys(n).forEach(e=>{s[e]=(...c)=>k(e,n[e],...c)}),o.useEffect(()=>{if(!i||!t)return;const e=()=>{t&&s[t]&&(console.log(`[Mesh SDK] Refetching ${t} on window focus`),s[t]())};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[i,t,s]);const d={sdk:s,loading:h,error:S,lastOperation:t,lastResult:E,refetch:t?s[t]:null,clearError:()=>a(null)};return Object.keys(s).forEach(e=>{d[e]=s[e]}),s.FriendsMoods&&(d.getFriendsMoods=s.FriendsMoods),d};export{p as u};
//# sourceMappingURL=useMeshSdk-3d4c1d79.js.map
