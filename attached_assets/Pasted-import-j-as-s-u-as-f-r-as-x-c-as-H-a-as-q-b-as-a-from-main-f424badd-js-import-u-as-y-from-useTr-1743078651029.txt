import{j as s,u as f,r as x,c as H,a as q,b as a}from"./main-f424badd.js";import{u as y}from"./useTranslation-ae14bfda.js";import{u as p,G as S,a as E,b as M,c as L}from"./queries-37c41353.js";const C=()=>{const{i18n:c}=y(),i=[{code:"en",name:"English"},{code:"ru",name:"Русский"}],e=c.language||"en",r=d=>{const o=d.target.value;c.changeLanguage(o),localStorage.setItem("preferredLanguage",o)};return s.jsx("div",{className:"language-switcher",children:s.jsx("select",{value:e,onChange:r,"aria-label":"Select language",children:i.map(d=>s.jsx("option",{value:d.code,children:d.name},d.code))})})};function R({children:c}){const{t:i}=y(),{currentUser:e,logout:r,isAuthenticated:d}=f(),[o,j]=x.useState(!1),[h,g]=x.useState(!1),l=H(),v=q();x.useEffect(()=>{j(!1),g(!1)},[l]);const b=()=>{j(!o)},m=()=>{g(!h)},t=()=>{r(),v("/")},N=u=>{if(!u)return"?";const n=u.split(" ");return n.length>1?`${n[0][0]}${n[1][0]}`.toUpperCase():u.substring(0,2).toUpperCase()};return s.jsxs("div",{className:"app-container",children:[s.jsx("header",{className:"app-header",children:s.jsxs("div",{className:"header-content",children:[s.jsx("div",{className:"header-left",children:s.jsxs(a,{to:"/",className:"logo",children:[s.jsx("span",{className:"logo-icon",children:"🤗"}),s.jsx("span",{className:"logo-text",children:"HugMeNow"})]})}),d()&&s.jsx("nav",{className:`main-nav ${o?"open":""}`,children:s.jsxs("ul",{className:"nav-list",children:[s.jsx("li",{className:"nav-item",children:s.jsx(a,{to:"/dashboard",className:l.pathname==="/dashboard"?"active":"",children:i("navigation.dashboard")})}),s.jsx("li",{className:"nav-item",children:s.jsx(a,{to:"/mood-tracker",className:l.pathname==="/mood-tracker"?"active":"",children:i("navigation.moodTracker")})}),s.jsx("li",{className:"nav-item",children:s.jsx(a,{to:"/hug-center",className:l.pathname==="/hug-center"?"active":"",children:i("navigation.hugCenter")})}),s.jsx("li",{className:"nav-item",children:s.jsx(a,{to:"/hug-gallery",className:l.pathname==="/hug-gallery"?"active":"",children:i("nav.hugGallery")})}),s.jsx("li",{className:"nav-item",children:s.jsx(a,{to:"/mood-history",className:l.pathname==="/mood-history"?"active":"",children:i("moodTracker.moodHistory")})})]})}),s.jsxs("div",{className:"header-right",children:[d()?s.jsxs("div",{className:"user-menu",children:[s.jsx("button",{className:"user-avatar",onClick:m,"aria-label":"User menu",children:e!=null&&e.avatarUrl?s.jsx("img",{src:e.avatarUrl,alt:e.name||e.username}):s.jsx("div",{className:"avatar-initials",children:N((e==null?void 0:e.name)||(e==null?void 0:e.username))})}),h&&s.jsxs("div",{className:"dropdown-menu",children:[s.jsxs("div",{className:"dropdown-header",children:[s.jsx("p",{className:"user-name",children:(e==null?void 0:e.name)||(e==null?void 0:e.username)}),s.jsx("p",{className:"user-email",children:e==null?void 0:e.email})]}),s.jsxs("ul",{className:"dropdown-list",children:[s.jsx("li",{className:"dropdown-item",children:s.jsx(a,{to:"/profile",children:i("navigation.profile")})}),s.jsx("li",{className:"dropdown-item",children:s.jsx("button",{onClick:t,children:i("navigation.logout")})})]})]})]}):s.jsxs("div",{className:"auth-buttons",children:[s.jsx(a,{to:"/login",className:"btn btn-outline",children:i("navigation.login")}),s.jsx(a,{to:"/register",className:"btn btn-primary",children:i("auth.signUp")})]}),s.jsx(C,{}),s.jsxs("button",{className:`menu-toggle ${o?"open":""}`,onClick:b,"aria-label":"Mobile menu",children:[s.jsx("span",{className:"menu-toggle-bar"}),s.jsx("span",{className:"menu-toggle-bar"}),s.jsx("span",{className:"menu-toggle-bar"})]})]})]})}),s.jsx("main",{className:"app-main",children:c}),s.jsxs("footer",{className:"app-footer",children:[s.jsxs("div",{className:"footer-content",children:[s.jsxs("div",{className:"footer-left",children:[s.jsxs("div",{className:"footer-logo",children:[s.jsx("span",{className:"logo-icon",children:"🤗"}),s.jsx("span",{className:"logo-text",children:"HugMeNow"})]}),s.jsx("p",{className:"footer-tagline",children:"Supporting emotional wellness with virtual hugs and mood tracking"})]}),s.jsx("div",{className:"footer-right",children:s.jsxs("div",{className:"footer-links",children:[s.jsxs("div",{className:"footer-links-column",children:[s.jsx("h4",{children:"Platform"}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx(a,{to:"/",children:i("navigation.home")})}),s.jsx("li",{children:s.jsx(a,{to:"/dashboard",children:i("navigation.dashboard")})}),s.jsx("li",{children:s.jsx(a,{to:"/mood-tracker",children:i("navigation.moodTracker")})}),s.jsx("li",{children:s.jsx(a,{to:"/hug-center",children:i("navigation.hugCenter")})}),s.jsx("li",{children:s.jsx(a,{to:"/hug-gallery",children:i("nav.hugGallery")})})]})]}),s.jsxs("div",{className:"footer-links-column",children:[s.jsx("h4",{children:"Resources"}),s.jsxs("ul",{children:[s.jsx("li",{children:s.jsx("a",{href:"#",children:"Help Center"})}),s.jsx("li",{children:s.jsx("a",{href:"#",children:"Privacy Policy"})}),s.jsx("li",{children:s.jsx("a",{href:"#",children:"Terms of Service"})}),s.jsx("li",{children:s.jsx("a",{href:"#",children:"Contact Us"})})]})]})]})})]}),s.jsx("div",{className:"footer-bottom",children:s.jsxs("p",{children:["© ",new Date().getFullYear()," HugMeNow. All rights reserved."]})})]})]})}function O(){var N,u;const{currentUser:c}=f(),[i,e]=x.useState(null),{data:r,loading:d}=p(S,{variables:{limit:7},fetchPolicy:"network-only"}),{data:o,loading:j}=p(E,{variables:{unreadOnly:!0},fetchPolicy:"network-only"}),{data:h,loading:g}=p(M,{fetchPolicy:"network-only"}),{data:l,loading:v}=p(L,{fetchPolicy:"network-only"});x.useEffect(()=>{if(r&&r.userMoods&&r.userMoods.length>0){const n=r.userMoods.reduce((w,k)=>w+k.score,0);e((n/r.userMoods.length).toFixed(1))}},[r]);const b=n=>n===null?"😶":n>=8?"😁":n>=6?"🙂":n>=4?"😐":n>=2?"😔":"😢",m=((N=o==null?void 0:o.receivedHugs)==null?void 0:N.length)||0,t=((u=h==null?void 0:h.pendingHugRequests)==null?void 0:u.length)||0;return s.jsx(R,{children:s.jsxs("div",{className:"dashboard-page",children:[s.jsxs("div",{className:"dashboard-header",children:[s.jsxs("h1",{children:["Welcome, ",(c==null?void 0:c.name)||(c==null?void 0:c.username)||"Friend"]}),s.jsx("p",{children:"Here's a snapshot of your emotional wellness journey today."})]}),s.jsx("section",{className:"quick-actions-section",children:s.jsxs("div",{className:"actions-container",children:[s.jsxs(a,{to:"/mood-tracker",className:"quick-action-btn mood",children:[s.jsx("span",{className:"action-icon",children:"📊"}),s.jsx("span",{className:"action-text",children:"Track Mood"})]}),s.jsxs(a,{to:"/hug-center",className:"quick-action-btn hug",children:[s.jsx("span",{className:"action-icon",children:"🤗"}),s.jsx("span",{className:"action-text",children:"Send Hug"})]}),s.jsxs(a,{to:"/hug-center/requests",className:"quick-action-btn request",children:[t>0&&s.jsx("span",{className:"notification-badge",children:t}),s.jsx("span",{className:"action-icon",children:"✉️"}),s.jsx("span",{className:"action-text",children:"Request Hug"})]}),s.jsxs(a,{to:"/mood-history",className:"quick-action-btn history",children:[s.jsx("span",{className:"action-icon",children:"📈"}),s.jsx("span",{className:"action-text",children:"View History"})]})]})}),s.jsxs("div",{className:"dashboard-grid",children:[s.jsxs("div",{className:"dashboard-card mood-summary-card",children:[s.jsx("h3",{children:"Your Mood Summary"}),s.jsxs("div",{className:"mood-overview",children:[s.jsx("div",{className:"mood-emoji",children:b(i)}),s.jsxs("div",{className:"mood-details",children:[s.jsx("div",{className:"mood-score",children:i||"–"}),s.jsx("div",{className:"mood-label",children:"7-day average"})]})]}),s.jsx("div",{className:"streak-info",children:v?s.jsx("div",{className:"loading-indicator",children:"Loading streak info..."}):s.jsxs("p",{children:[s.jsx("span",{className:"streak-count",children:(l==null?void 0:l.moodStreak)||0})," day",(l==null?void 0:l.moodStreak)!==1&&"s"," streak"]})}),s.jsxs("div",{className:"card-actions",children:[s.jsx(a,{to:"/mood-tracker",className:"btn btn-primary",children:"Track Today"}),s.jsx(a,{to:"/mood-history",className:"btn btn-outline-primary",children:"View History"})]})]}),s.jsxs("div",{className:"dashboard-card hugs-card",children:[s.jsx("h3",{children:"Unread Hugs"}),j?s.jsx("div",{className:"loading-indicator",children:"Loading hugs..."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hugs-overview",children:s.jsxs("div",{className:"hugs-count",children:[s.jsx("span",{className:"count-number",children:m}),s.jsxs("span",{className:"count-label",children:[m===1?"hug":"hugs"," to view"]})]})}),m>0?s.jsxs("div",{className:"hugs-preview",children:[s.jsx("p",{children:"New hugs from:"}),s.jsxs("ul",{className:"hugs-list",children:[o.receivedHugs.slice(0,3).map(n=>s.jsxs("li",{children:[s.jsx("strong",{children:n.sender.name||n.sender.username})," - ",n.type," Hug"]},n.id)),m>3&&s.jsxs("li",{className:"and-more",children:["And ",m-3," more..."]})]})]}):s.jsx("p",{className:"no-data-message",children:"No unread hugs at the moment."})]}),s.jsxs("div",{className:"card-actions",children:[s.jsx(a,{to:"/hug-center/received",className:"btn btn-secondary",children:"View All Hugs"}),s.jsx(a,{to:"/hug-center",className:"btn btn-outline-secondary",children:"Send a Hug"})]})]}),s.jsxs("div",{className:"dashboard-card requests-card",children:[s.jsx("h3",{children:"Pending Hug Requests"}),g?s.jsx("div",{className:"loading-indicator",children:"Loading requests..."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"requests-overview",children:s.jsxs("div",{className:"requests-count",children:[s.jsx("span",{className:"count-number",children:t}),s.jsx("span",{className:"count-label",children:"waiting for response"})]})}),t>0?s.jsxs("div",{className:"requests-preview",children:[s.jsx("p",{children:"People who need your support:"}),s.jsxs("ul",{className:"requests-list",children:[h.pendingHugRequests.slice(0,3).map(n=>s.jsxs("li",{children:[s.jsx("strong",{children:n.requester.name||n.requester.username}),n.message&&` - "${n.message}"`]},n.id)),t>3&&s.jsxs("li",{className:"and-more",children:["And ",t-3," more..."]})]})]}):s.jsx("p",{className:"no-data-message",children:"No pending requests right now."})]}),s.jsxs("div",{className:"card-actions",children:[s.jsx(a,{to:"/hug-center/requests/pending",className:"btn btn-primary",children:"Respond to Requests"}),s.jsx(a,{to:"/hug-center/requests/new",className:"btn btn-outline-primary",children:"Request a Hug"})]})]})]}),s.jsx("div",{className:"dashboard-footer",children:s.jsx("p",{children:"Remember, taking time for your emotional wellness is always worth it. 💖"})})]})})}export{O as default};
